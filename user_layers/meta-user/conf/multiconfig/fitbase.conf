# Base fitImage generation configuration common for generating fitImage with ramdisk as both
# fitImage subimage and kernel initramfs.
#
# Image types produced by kernel class. We just need fitImage.
KERNEL_IMAGETYPE = "fitImage"
# Additional classes the kernel class will inherit.
KERNEL_CLASSES += "kernel-fitimage"
# Initramfs image used for fitImage and for inclusion
# in kernel, if requested. Settings this variable isn't
# enough to inline said image into kernel. One also needs
# to set variable INITRAMFS_IMAGE_BUNDLE to 1.
INITRAMFS_IMAGE = "uimg-min-initramfs"
# The kind of inclusion of ramdisk into fitImage doesn't affect medium image layout.
WKS_FILES = "uimg-min-fit.wks.in"
# uimg-min-kfit will use fitImage of just kernel. MACHINE is used instead of
# KERNEL_FIT_LINK_NAME which defaults to MACHINE and is only visible to those
# inheriting kernel-artifact-names.bbclass. Might need to be changed later.
USER_FITIMAGE = "fitImage-${INITRAMFS_IMAGE_NAME}-${MACHINE}"
# We don't need a dtb file on /boot since it's included in fitImage.
IMAGE_BOOT_FILES = "boot.scr ${USER_FITIMAGE}"
# Undo append made by sunxi.inc
IMAGE_BOOT_FILES:remove = "${KERNEL_DEVICETREE}"
